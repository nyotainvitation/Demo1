<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aarav & Khushi | The Wedding Journey</title>
    
    <!-- Fonts: Cinzel (Royal Serif) & Montserrat (Modern Sans) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Montserrat:wght@300;400;500&family=Great+Vibes&display=swap" rel="stylesheet">
    
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- GSAP for Cinematic Animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gold: '#D4AF37',
                        'gold-light': '#F4DF4E',
                        'gold-dark': '#aa8c2c',
                        maroon: '#4A0E0E',
                        'maroon-dark': '#2B0505',
                        ivory: '#FAF9F6',
                        'ivory-dark': '#EBE8E0',
                    },
                    fontFamily: {
                        serif: ['Cinzel', 'serif'],
                        sans: ['Montserrat', 'sans-serif'],
                        script: ['Great Vibes', 'cursive'],
                    },
                    animation: {
                        'spin-slow': 'spin 12s linear infinite',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        /* FILM GRAIN OVERLAY */
        .grain-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0.05;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* Fix Mobile Horizontal Scroll Glitch */
        html, body {
            background-color: #FAF9F6;
            overflow-x: hidden;
            width: 100%;
            max-width: 100vw;
            position: relative;
        }

        /* Enhanced Diya Flame */
        .flame {
            width: 24px;
            height: 24px;
            background: radial-gradient(ellipse at bottom, rgba(255,255,200,1) 0%, rgba(255,200,0,1) 40%, rgba(255,69,0,0.8) 100%);
            border-radius: 50% 0 50% 50%;
            transform: rotate(-45deg);
            box-shadow: 0 0 10px rgba(255,200,0,0.5), 0 0 30px rgba(255,69,0,0.3);
            animation: flicker 1.5s infinite alternate;
            filter: blur(1px);
        }

        @keyframes flicker {
            0% { transform: rotate(-45deg) scale(1) skewX(0deg); opacity: 1; }
            20% { transform: rotate(-44deg) scale(1.05) skewX(2deg); opacity: 0.9; }
            40% { transform: rotate(-46deg) scale(0.95) skewX(-2deg); opacity: 1; }
            60% { transform: rotate(-45deg) scale(1.02) skewX(1deg); opacity: 0.85; }
            100% { transform: rotate(-45deg) scale(1.1) skewX(0deg); opacity: 0.9; }
        }

        /* Parallax & Smoothness */
        .parallax-bg {
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #1a0202; 
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #D4AF37, #8a6c12); 
            border-radius: 4px;
        }

        /* Gold Shimmer Text Effect */
        .gold-shimmer {
            background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            animation: shine 4s linear infinite;
        }
        @keyframes shine {
            to { background-position: 200% center; }
        }

        /* 3D Tilt Card Effect */
        .tilt-card {
            transition: transform 0.1s ease-out;
            transform-style: preserve-3d;
        }
        
        /* FLIP CARD MECHANICS */
        .flip-card {
            background-color: transparent;
            perspective: 1000px;
        }
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
            cursor: pointer;
        }
        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }
        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Safari */
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            border-radius: 0.5rem;
        }
        .flip-card-front {
            background-color: #4A0E0E;
            color: #D4AF37;
            border: 1px solid #D4AF37;
        }
        .flip-card-back {
            background-color: #FAF9F6;
            color: #4A0E0E;
            transform: rotateY(180deg);
            border: 1px solid #4A0E0E;
        }

        /* Audio Pulse */
        .audio-pulse {
            animation: pulse-gold 2s infinite;
        }
        @keyframes pulse-gold {
            0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(212, 175, 55, 0); }
            100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); }
        }
        
        /* Floating Action Button (Shower Love) */
        .fab-shower {
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
            transition: all 0.3s ease;
        }
        .fab-shower:active {
            transform: scale(0.9) translateY(2px);
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.8);
        }
    </style>
</head>
<body class="text-maroon-dark antialiased">

    <!-- Film Grain for Cinematic Feel -->
    <div class="grain-overlay"></div>

    <!-- AUDIO ELEMENT -->
    <!-- Using a copyright-free Shehnai placeholder -->
    <audio id="wedding-audio" loop>
        <source src="/assets/Ganeshji.mp3" type="audio/mpeg">
    </audio>

    <!-- FLOATING CONTROLS (Audio & Shower Love) -->
    <div class="fixed top-4 right-4 md:top-6 md:right-6 z-50 flex flex-col gap-4">
        <!-- Audio -->
        <button id="mute-btn" class="bg-maroon/90 backdrop-blur text-gold border border-gold p-2 md:p-3 rounded-full hidden shadow-2xl audio-pulse transition-transform hover:scale-110 flex items-center justify-center w-10 h-10 md:w-12 md:h-12">
            <i class="fas fa-volume-up text-sm md:text-base"></i>
        </button>
    </div>

    <!-- FLOATING 'SHOWER LOVE' BUTTON (Bottom Right) -->
    <button onclick="triggerPetalBurst()" id="shower-btn" class="fixed bottom-6 right-6 z-40 bg-gradient-to-tr from-maroon to-[#6d1a1a] text-gold border border-gold/50 p-4 rounded-full hidden shadow-2xl fab-shower flex items-center gap-2 group overflow-hidden">
        <div class="relative z-10 flex items-center gap-2">
            <i class="fas fa-heart text-xl animate-pulse-slow"></i>
            <span class="text-xs font-serif uppercase tracking-widest hidden md:inline">Shower Love</span>
        </div>
        <div class="absolute inset-0 bg-gold opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
    </button>

    <!-- 1. OPENING RITUAL OVERLAY -->
    <div id="intro-overlay" class="fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center text-center px-4 overflow-hidden">
        
        <!-- Sacred Symbol (Ganesha) -->
        <div id="intro-symbol" class="text-gold text-3xl md:text-4xl mb-6 md:mb-8 opacity-0">
            <i class="fas fa-om"></i>
        </div>

        <!-- Diya Container -->
        <div class="relative mb-8 md:mb-12 opacity-0" id="diya-container">
            <!-- Glow Effect -->
            <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-24 h-24 md:w-32 md:h-32 bg-orange-500 rounded-full blur-[40px] md:blur-[60px] opacity-20 animate-pulse"></div>
            
            <div class="w-16 h-8 md:w-20 md:h-10 bg-gradient-to-b from-[#8B4513] to-[#4A0E0E] rounded-b-full relative overflow-hidden border-t border-[#D4AF37] shadow-[0_10px_20px_rgba(0,0,0,0.8)]"></div>
            <div class="absolute -top-4 md:-top-5 left-1/2 transform -translate-x-1/2 flame"></div>
        </div>

        <!-- Text Sequence -->
        <div id="intro-text-wrapper" class="h-24 md:h-20 flex items-center justify-center relative w-full px-2">
            <div class="intro-text absolute text-gold font-serif text-xs sm:text-sm md:text-xl tracking-[0.1em] md:tracking-[0.3em] uppercase opacity-0 leading-relaxed md:leading-normal">|| Vakratunda Mahakaya Suryakoti Samaprabh.
 <br>Nirvighanam Kuru Me Dev Sarvakaryeshu Sarvada ‡••</div>
            <div class="intro-text absolute text-gold font-serif text-lg sm:text-xl md:text-2xl tracking-widest opacity-0">Two Families</div>
            <div class="intro-text absolute text-gold font-serif text-lg sm:text-xl md:text-2xl tracking-widest opacity-0">Two Hearts</div>
            <div class="intro-text absolute text-gold font-serif text-lg sm:text-xl md:text-2xl tracking-widest opacity-0">One Forever Story</div>
        </div>

        <!-- Couple Name Reveal -->
        <div id="intro-couple" class="opacity-0 transform scale-90 mt-4 md:mt-8">
            <h1 class="text-ivory font-script text-5xl sm:text-6xl md:text-8xl mb-2 md:mb-4 drop-shadow-lg">
                Aarav <span class="text-gold text-3xl md:text-4xl align-middle mx-1 md:mx-2">&</span> Khushi
            </h1>
            <p class="text-gold/60 text-[10px] md:text-xs tracking-[0.4em] md:tracking-[0.5em] uppercase font-sans">The Royal Union</p>
        </div>

        <!-- Enter Button -->
        <div id="enter-btn-wrapper" class="mt-12 md:mt-16 opacity-0">
            <button id="enter-btn" class="group relative px-8 py-3 md:px-10 md:py-4 overflow-hidden rounded-sm bg-transparent border border-gold/40 hover:border-gold transition-all duration-500">
                <div class="absolute inset-0 w-0 bg-gold transition-all duration-[250ms] ease-out group-hover:w-full opacity-10"></div>
                <span class="relative text-gold font-serif uppercase tracking-[0.15em] md:tracking-[0.2em] group-hover:text-white transition-colors text-xs md:text-sm">Enter The Wedding</span>
            </button>
        </div>
    </div>

    <!-- MAIN WEBSITE CONTENT -->
    <div id="main-content" class="opacity-0 relative overflow-x-hidden w-full">

        <!-- 2. HERO WELCOME SECTION -->
        <section class="h-screen relative flex items-center justify-center overflow-hidden parallax-bg w-full" 
                 style="background-image: linear-gradient(to bottom, rgba(10,5,5,0.4), rgba(43,5,5,0.8)), url('/assets/1.jpg');">
            
            <div class="absolute inset-0 bg-black/20"></div>

            <div class="text-center text-ivory z-10 px-4 gs-reveal relative w-full">
                <!-- DYNAMIC PERSONALIZED GREETING -->
                <p id="welcome-msg" class="font-sans uppercase tracking-[0.2em] md:tracking-[0.3em] text-[10px] md:text-sm mb-4 md:mb-6 text-gold-light">Together with their families</p>
                
                <h1 class="font-serif text-5xl sm:text-6xl md:text-9xl mb-2 md:mb-4 gold-shimmer drop-shadow-2xl">Aarav & Khushi</h1>
                
                <p class="font-sans text-xs md:text-lg tracking-widest mb-8 md:mb-10 text-gray-200">Invite you to celebrate their love</p>
                
                <div class="flex items-center justify-center gap-2 md:gap-4 text-gold mb-6 md:mb-8 font-serif text-lg md:text-2xl">
                    <span class="border-t border-gold w-8 md:w-12"></span>
                    <span>12 . 12 . 2026</span>
                    <span class="border-t border-gold w-8 md:w-12"></span>
                </div>
                
                <p class="font-sans text-[10px] md:text-xs tracking-[0.3em] md:tracking-[0.4em] uppercase text-gray-400">Ahmedabad, India</p>
            </div>
            
            <!-- Scroll Indicator -->
            <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 flex flex-col items-center gap-2 opacity-60">
                <span class="text-[10px] uppercase tracking-widest text-ivory">Scroll</span>
                <div class="w-[1px] h-12 bg-gradient-to-b from-gold to-transparent"></div>
            </div>
        </section>

        <!-- BRANDING STRIP -->
        <div class="bg-maroon-dark py-4 md:py-6 text-center border-b border-gold/10 relative overflow-hidden w-full">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-gold to-transparent opacity-30"></div>
            <p class="text-gold text-[8px] sm:text-[10px] md:text-xs tracking-[0.4em] md:tracking-[0.6em] uppercase font-serif px-2">NYOTA ‚Äî Cinematic Memory Experience</p>
        </div>

        <!-- 3. OUR STORY -->
        <section class="py-16 md:py-24 px-4 md:px-20 bg-ivory text-center relative overflow-hidden w-full">
            <!-- Mandala Background -->
            <div class="absolute -left-10 md:-left-20 top-10 md:top-20 w-64 md:w-96 h-64 md:h-96 bg-[url('https://www.transparenttextures.com/patterns/black-linen.png')] opacity-5 rounded-full animate-spin-slow pointer-events-none"></div>

            <div class="max-w-3xl mx-auto gs-reveal relative z-10">
                <div class="text-gold text-3xl md:text-4xl mb-4 md:mb-6"><i class="fas fa-heart"></i></div>
                <h2 class="text-3xl md:text-5xl font-serif text-maroon mb-6 md:mb-10">The Beginning</h2>
                <p class="text-gray-600 font-sans leading-relaxed md:leading-loose text-sm md:text-lg mb-6 md:mb-8 font-light px-2">
                    What started as a formal introduction over evening tea blossomed into a conversation that neither wanted to end. 
                    In the quiet corners of Ahmedabad, amidst shared laughter and silent understandings, 
                    strangers became friends, and friends found their soulmates.
                </p>
            </div>
        </section>
        
        <!-- NEW FEATURE: THE LOVE TRIVIA (Flip Cards) -->
        <section class="pb-16 md:pb-24 bg-ivory relative z-10">
            <div class="container mx-auto px-4">
                <h3 class="text-center font-serif text-gold text-xl mb-8">Do You Know Us?</h3>
                <div class="flex flex-wrap justify-center gap-6">
                    <!-- Card 1 -->
                    <div class="flip-card w-64 h-40" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <i class="fas fa-question-circle text-2xl mb-2"></i>
                                <p class="font-serif text-sm">Who made the first move?</p>
                                <p class="text-[10px] mt-2 text-gold/60 uppercase tracking-widest">Tap to Flip</p>
                            </div>
                            <div class="flip-card-back">
                                <i class="fas fa-heart text-maroon text-2xl mb-2"></i>
                                <p class="font-serif text-lg font-bold">Aarav Did!</p>
                                <p class="text-xs text-gray-500">(But Khushi hinted it)</p>
                            </div>
                        </div>
                    </div>
                     <!-- Card 2 -->
                    <div class="flip-card w-64 h-40" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <i class="fas fa-question-circle text-2xl mb-2"></i>
                                <p class="font-serif text-sm">Who is the better cook?</p>
                                <p class="text-[10px] mt-2 text-gold/60 uppercase tracking-widest">Tap to Flip</p>
                            </div>
                            <div class="flip-card-back">
                                <i class="fas fa-utensils text-maroon text-2xl mb-2"></i>
                                <p class="font-serif text-lg font-bold">Khushi!</p>
                                <p class="text-xs text-gray-500">(Aarav makes great Chai though)</p>
                            </div>
                        </div>
                    </div>
                     <!-- Card 3 -->
                    <div class="flip-card w-64 h-40" onclick="this.classList.toggle('flipped')">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <i class="fas fa-question-circle text-2xl mb-2"></i>
                                <p class="font-serif text-sm">Who is always late?</p>
                                <p class="text-[10px] mt-2 text-gold/60 uppercase tracking-widest">Tap to Flip</p>
                            </div>
                            <div class="flip-card-back">
                                <i class="fas fa-clock text-maroon text-2xl mb-2"></i>
                                <p class="font-serif text-lg font-bold">Definitely Aarav</p>
                                <p class="text-xs text-gray-500">(Running on IST)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. COUNTDOWN TIMER -->
        <section class="py-16 md:py-20 bg-[#F5F0E6] relative border-y border-maroon/5 overflow-hidden w-full">
            <div class="max-w-4xl mx-auto flex flex-wrap justify-center gap-6 md:gap-20 text-center gs-reveal" id="countdown">
                <!-- JS Populated -->
            </div>
        </section>

        <!-- 5. WEDDING JOURNEY (TIMELINE) -->
        <section class="py-20 md:py-32 bg-maroon-dark text-ivory relative overflow-hidden w-full">
            <!-- Petals Canvas -->
            <canvas id="petals-canvas" class="absolute inset-0 pointer-events-none z-0 opacity-40"></canvas>
            
            <div class="container mx-auto px-4 relative z-10">
                <div class="text-center mb-16 md:mb-24">
                    <span class="text-gold text-[10px] md:text-xs tracking-[0.3em] md:tracking-[0.4em] uppercase block mb-3 md:mb-4">The Celebration</span>
                    <h2 class="text-4xl md:text-6xl font-serif text-ivory gold-shimmer">Royal Events</h2>
                </div>

                <!-- Timeline -->
                <div class="relative max-w-5xl mx-auto">
                    <!-- Central Line -->
                    <div class="absolute left-6 md:left-1/2 top-0 bottom-0 w-[1px] bg-gradient-to-b from-transparent via-gold to-transparent opacity-50"></div>

                    <!-- Event 1: Ganesh Sthapna -->
                    <div class="relative pl-16 md:pl-0 md:flex md:justify-between items-center mb-16 md:mb-24 group timeline-item">
                        <div class="absolute left-6 md:left-1/2 -translate-x-1/2 w-3 h-3 bg-gold rotate-45 border border-maroon-dark z-20 shadow-[0_0_10px_#D4AF37]"></div>
                        
                        <div class="md:w-[45%] text-left md:text-right md:pr-12 gs-reveal-left">
                            <h3 class="text-2xl md:text-3xl font-serif text-gold mb-1">Ganesh Sthapna</h3>
                            <div class="text-[10px] md:text-xs font-sans tracking-widest text-gray-400 mb-3 md:mb-4 uppercase">Dec 10 ‚Ä¢ 9:00 AM</div>
                            <p class="text-gray-300 font-light text-sm leading-relaxed">Invoking Lord Ganesha to remove obstacles and bless the beginning of our auspicious journey.</p>
                        </div>
                        <div class="md:w-[45%] md:pl-12 gs-reveal-right mt-6 md:mt-0">
                            <div class="bg-white/5 backdrop-blur-md p-5 md:p-6 border border-white/10 hover:border-gold/50 transition-all duration-500 rounded-sm">
                                <div class="flex items-center gap-3 text-gold mb-3">
                                    <i class="fas fa-map-pin text-sm"></i>
                                    <span class="text-xs md:text-sm font-sans uppercase tracking-wider">Shah Residence</span>
                                </div>
                                <div class="flex items-center gap-3 text-gold/80 mb-4 md:mb-6">
                                    <i class="fas fa-vest text-sm"></i>
                                    <span class="text-xs md:text-sm font-sans">Pastel Ethnic</span>
                                    <!-- COLOR PALETTE SWATCH -->
                                    <div class="flex gap-1 ml-2">
                                        <div class="w-3 h-3 rounded-full bg-[#E0F7FA] border border-white/20" title="Pastel Blue"></div>
                                        <div class="w-3 h-3 rounded-full bg-[#FCE4EC] border border-white/20" title="Pastel Pink"></div>
                                        <div class="w-3 h-3 rounded-full bg-[#F3E5F5] border border-white/20" title="Lavender"></div>
                                    </div>
                                </div>
                                <div class="flex gap-3">
                                    <a href="https://www.google.com/maps/search/?api=1&query=Bodakdev,Ahmedabad" target="_blank" class="inline-block text-[10px] uppercase tracking-[0.2em] border-b border-gold pb-1 hover:text-white transition">Maps</a>
                                    <!-- UBER DEEP LINK -->
                                    <a href="https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[formatted_address]=Bodakdev%2C%20Ahmedabad&dropoff[nickname]=Shah%20Residence" target="_blank" class="inline-block text-[10px] uppercase tracking-[0.2em] border-b border-gold pb-1 hover:text-white transition">Book Ride</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Event 2: Sangeet -->
                    <div class="relative pl-16 md:pl-0 md:flex md:flex-row-reverse md:justify-between items-center mb-16 md:mb-24 group timeline-item">
                        <div class="absolute left-6 md:left-1/2 -translate-x-1/2 w-3 h-3 bg-gold rotate-45 border border-maroon-dark z-20 shadow-[0_0_10px_#D4AF37]"></div>
                        
                        <div class="md:w-[45%] text-left md:pl-12 gs-reveal-right">
                            <h3 class="text-2xl md:text-3xl font-serif text-gold mb-1">Sangeet Night</h3>
                            <div class="text-[10px] md:text-xs font-sans tracking-widest text-gray-400 mb-3 md:mb-4 uppercase">Dec 11 ‚Ä¢ 7:00 PM</div>
                            <p class="text-gray-300 font-light text-sm leading-relaxed">An evening of music, dance, and joy as both families come together to celebrate.</p>
                        </div>
                        <div class="md:w-[45%] text-left md:text-right md:pr-12 gs-reveal-left mt-6 md:mt-0">
                            <div class="bg-white/5 backdrop-blur-md p-5 md:p-6 border border-white/10 hover:border-gold/50 transition-all duration-500 rounded-sm">
                                <div class="flex items-center md:justify-end gap-3 text-gold mb-3">
                                    <i class="fas fa-map-pin text-sm"></i>
                                    <span class="text-xs md:text-sm font-sans uppercase tracking-wider">The Grand Bhagwati</span>
                                </div>
                                <div class="flex items-center md:justify-end gap-3 text-gold/80 mb-4 md:mb-6">
                                    <i class="fas fa-vest text-sm"></i>
                                    <span class="text-xs md:text-sm font-sans">Indo-Western Glam</span>
                                    <!-- COLOR PALETTE SWATCH -->
                                    <div class="flex gap-1 ml-2">
                                        <div class="w-3 h-3 rounded-full bg-[#1A237E] border border-white/20" title="Navy"></div>
                                        <div class="w-3 h-3 rounded-full bg-[#C2185B] border border-white/20" title="Maroon"></div>
                                        <div class="w-3 h-3 rounded-full bg-[#FFD700] border border-white/20" title="Gold"></div>
                                    </div>
                                </div>
                                <div class="flex gap-3 md:justify-end mb-4">
                                    <a href="https://www.google.com/maps/search/?api=1&query=The+Grand+Bhagwati,+Ahmedabad" target="_blank" class="inline-block text-[10px] uppercase tracking-[0.2em] border-b border-gold pb-1 hover:text-white transition">Maps</a>
                                    <!-- UBER DEEP LINK -->
                                    <a href="https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[formatted_address]=The%20Grand%20Bhagwati%2C%20S.G.%20Highway%2C%20Ahmedabad&dropoff[nickname]=The%20Grand%20Bhagwati" target="_blank" class="inline-block text-[10px] uppercase tracking-[0.2em] border-b border-gold pb-1 hover:text-white transition">Uber</a>
                                </div>
                                
                                <!-- FEATURE: VIRTUAL DJ -->
                                <div class="border-t border-gold/20 pt-4 mt-2">
                                    <p class="text-[10px] text-gold/70 uppercase tracking-widest mb-2 md:text-right">Request a Song for DJ</p>
                                    <div class="flex items-center gap-2 md:justify-end relative">
                                        <input type="text" id="song-request" placeholder="Track Name..." class="bg-black/30 border border-gold/30 rounded px-2 py-1 text-xs text-white focus:outline-none focus:border-gold w-32 md:w-40">
                                        <button onclick="sendSong()" class="text-gold hover:text-white transition"><i class="fas fa-paper-plane"></i></button>
                                        <i id="music-note" class="fas fa-music text-gold absolute opacity-0 pointer-events-none text-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Event 3: Wedding -->
                    <div class="relative pl-16 md:pl-0 md:flex md:justify-between items-center group timeline-item">
                        <div class="absolute left-6 md:left-1/2 -translate-x-1/2 w-4 h-4 bg-gold rounded-full border-4 border-maroon-dark z-20 shadow-[0_0_20px_#D4AF37] animate-pulse"></div>
                        
                        <div class="md:w-[45%] text-left md:text-right md:pr-12 gs-reveal-left">
                            <h3 class="text-3xl md:text-4xl font-serif text-gold mb-1">The Wedding</h3>
                            <div class="text-[10px] md:text-xs font-sans tracking-widest text-gray-400 mb-3 md:mb-4 uppercase">Dec 12 ‚Ä¢ Baarat 6:30 PM</div>
                            <p class="text-gray-300 font-light text-sm leading-relaxed">The sacred moment where fire becomes witness to our eternal promises.</p>
                        </div>
                        <div class="md:w-[45%] md:pl-12 gs-reveal-right mt-6 md:mt-0">
                            <div class="bg-gradient-to-br from-gold/10 to-transparent p-5 md:p-6 border border-gold/40 shadow-[0_0_30px_rgba(212,175,55,0.1)] rounded-sm">
                                <div class="flex items-center gap-3 text-gold mb-3">
                                    <i class="fas fa-map-pin text-sm"></i>
                                    <span class="text-xs md:text-sm font-sans uppercase tracking-wider">Karnavati Club</span>
                                </div>
                                <div class="flex items-center gap-3 text-gold/80 mb-4 md:mb-6">
                                    <i class="fas fa-vest text-sm"></i>
                                    <span class="text-xs md:text-sm font-sans">Royal Indian</span>
                                    <!-- COLOR PALETTE SWATCH -->
                                    <div class="flex gap-1 ml-2">
                                        <div class="w-3 h-3 rounded-full bg-[#B71C1C] border border-white/20" title="Red"></div>
                                        <div class="w-3 h-3 rounded-full bg-[#F57F17] border border-white/20" title="Orange"></div>
                                        <div class="w-3 h-3 rounded-full bg-[#FFD700] border border-white/20" title="Gold"></div>
                                    </div>
                                </div>
                                <button class="bg-gold text-maroon-dark px-4 md:px-6 py-2 text-[10px] md:text-[11px] font-bold uppercase tracking-widest hover:bg-white transition-colors">Save To Calendar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 6. FAMILY & BLESSINGS (3D Tilt Section) -->
        <section class="py-16 md:py-24 bg-ivory text-center relative overflow-hidden w-full">
            <h2 class="text-3xl font-serif text-maroon mb-10 md:mb-16 gs-reveal">The Pillars of Strength</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 max-w-5xl mx-auto px-6">
                <!-- Groom Side -->
                <div class="p-6 md:p-8 border border-maroon/10 bg-white shadow-lg relative tilt-card gs-reveal-left" onmousemove="tiltCard(event, this)" onmouseleave="resetCard(this)">
                    <div class="absolute top-4 left-4 w-6 h-6 md:w-8 md:h-8 border-t border-l border-gold"></div>
                    <div class="absolute bottom-4 right-4 w-6 h-6 md:w-8 md:h-8 border-b border-r border-gold"></div>
                    <p class="text-[10px] tracking-[0.3em] uppercase text-gray-400 mb-2 md:mb-3">Groom's Parents</p>
                    <h3 class="text-xl md:text-2xl font-serif text-maroon-dark mb-1">Rajesh & Anjali Shah</h3>
                    <p class="font-sans text-xs text-gray-500 italic">"Welcoming a daughter, not just a bride."</p>
                </div>
                <!-- Bride Side -->
                <div class="p-6 md:p-8 border border-maroon/10 bg-white shadow-lg relative tilt-card gs-reveal-right" onmousemove="tiltCard(event, this)" onmouseleave="resetCard(this)">
                    <div class="absolute top-4 left-4 w-6 h-6 md:w-8 md:h-8 border-t border-l border-gold"></div>
                    <div class="absolute bottom-4 right-4 w-6 h-6 md:w-8 md:h-8 border-b border-r border-gold"></div>
                    <p class="text-[10px] tracking-[0.3em] uppercase text-gray-400 mb-2 md:mb-3">Bride's Parents</p>
                    <h3 class="text-xl md:text-2xl font-serif text-maroon-dark mb-1">Hitesh & Meera Patel</h3>
                    <p class="font-sans text-xs text-gray-500 italic">"Giving away a piece of our heart."</p>
                </div>
            </div>
        </section>

        <!-- 7. PHOTO GALLERY PREVIEW -->
        <section class="py-16 md:py-20 bg-[#1a1a1a] overflow-hidden w-full">
            <div class="container mx-auto px-4">
                <div class="text-center mb-10 md:mb-16 gs-reveal">
                    <h2 class="text-3xl font-serif text-gold">Memory Lane</h2>
                    <p class="text-gray-400 mt-2 md:mt-3 font-sans text-xs md:text-sm tracking-wide">Captured moments leading to forever</p>
                </div>
                <!-- Layout -->
                <div class="flex flex-col md:grid md:grid-cols-4 gap-4 md:h-[600px] gs-reveal">
                    
                    <div class="h-64 md:h-auto md:col-span-2 md:row-span-2 relative overflow-hidden group cursor-pointer rounded-sm">
                        <div class="absolute inset-0 bg-black/40 group-hover:bg-transparent transition-colors z-10 duration-700"></div>
                        <img src="/assets/2.jpg" class="w-full h-full object-cover transition transform duration-[1.5s] group-hover:scale-110 filter sepia-[0.3] group-hover:sepia-0" alt="Couple">
                        <div class="absolute bottom-6 left-6 z-20 text-white opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity duration-500 md:translate-y-4 group-hover:translate-y-0">
                            <p class="font-script text-3xl drop-shadow-md">The Engagement</p>
                        </div>
                    </div>

                    <div class="h-48 md:h-auto relative overflow-hidden group cursor-pointer rounded-sm">
                        <div class="absolute inset-0 bg-black/20 z-10"></div>
                        <img src="/assets/3.jpg" class="w-full h-full object-cover transition transform duration-700 group-hover:scale-110" alt="Hands">
                    </div>

                    <div class="h-48 md:h-auto relative overflow-hidden group cursor-pointer rounded-sm">
                         <div class="absolute inset-0 bg-black/20 z-10"></div>
                        <img src="/assets/4.jpg" class="w-full h-full object-cover transition transform duration-700 group-hover:scale-110" alt="Jewelry">
                    </div>

                    <div class="h-48 md:h-auto md:col-span-2 relative overflow-hidden bg-maroon-dark flex items-center justify-center text-center p-8 border border-gold/20 group rounded-sm">
                        <div class="relative z-10 transform transition duration-500 group-hover:scale-105">
                            <i class="fas fa-images text-3xl md:text-4xl text-gold mb-3 md:mb-4 opacity-80"></i>
                            <h3 class="font-serif text-xl md:text-2xl text-ivory mb-2">View Full Gallery</h3>
                            <p class="font-sans text-[10px] md:text-xs text-gray-400 tracking-widest">COMING SOON</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 8. BLESSINGS MARQUEE -->
        <section class="py-16 md:py-24 bg-ivory overflow-hidden relative border-b border-maroon/10 w-full">
            <h2 class="text-center text-3xl font-serif text-maroon mb-10 md:mb-16 gs-reveal">Words of Love</h2>
            
            <div class="flex space-x-6 md:space-x-12 animate-marquee whitespace-nowrap overflow-x-auto pb-8 md:pb-12 px-4 no-scrollbar" style="scrollbar-width: none;">
                <!-- Card 1 -->
                <div class="inline-block min-w-[280px] md:min-w-[300px] bg-white p-6 md:p-8 shadow-[0_10px_30px_rgba(0,0,0,0.05)] border-t-[3px] border-gold relative gs-reveal">
                    <i class="fas fa-quote-left text-gold/30 text-3xl md:text-4xl absolute top-4 left-4"></i>
                    <p class="text-gray-600 font-script text-xl md:text-2xl mb-4 md:mb-6 relative z-10 mt-4 leading-relaxed whitespace-normal">"May your love grow deeper with every passing year."</p>
                    <div class="border-t border-gray-100 pt-4 mt-auto">
                        <p class="text-[10px] md:text-xs font-bold text-maroon tracking-widest uppercase">Priya Masi</p>
                    </div>
                </div>
                 <!-- Card 2 -->
                <div class="inline-block min-w-[280px] md:min-w-[300px] bg-white p-6 md:p-8 shadow-[0_10px_30px_rgba(0,0,0,0.05)] border-t-[3px] border-gold relative gs-reveal">
                    <i class="fas fa-quote-left text-gold/30 text-3xl md:text-4xl absolute top-4 left-4"></i>
                    <p class="text-gray-600 font-script text-xl md:text-2xl mb-4 md:mb-6 relative z-10 mt-4 leading-relaxed whitespace-normal">"So excited to welcome Khushi to our crazy family!"</p>
                    <div class="border-t border-gray-100 pt-4 mt-auto">
                        <p class="text-[10px] md:text-xs font-bold text-maroon tracking-widest uppercase">Rohan (Brother)</p>
                    </div>
                </div>
                 <!-- Card 3 -->
                <div class="inline-block min-w-[280px] md:min-w-[300px] bg-white p-6 md:p-8 shadow-[0_10px_30px_rgba(0,0,0,0.05)] border-t-[3px] border-gold relative gs-reveal">
                    <i class="fas fa-quote-left text-gold/30 text-3xl md:text-4xl absolute top-4 left-4"></i>
                    <p class="text-gray-600 font-script text-xl md:text-2xl mb-4 md:mb-6 relative z-10 mt-4 leading-relaxed whitespace-normal">"A match made in heaven. God bless you both."</p>
                    <div class="border-t border-gray-100 pt-4 mt-auto">
                        <p class="text-[10px] md:text-xs font-bold text-maroon tracking-widest uppercase">Nani Ma</p>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-2 md:mt-4">
                <a href="#" class="text-maroon/60 hover:text-maroon text-[10px] md:text-xs uppercase tracking-widest transition border-b border-transparent hover:border-maroon pb-1">Send a Blessing</a>
            </div>
        </section>

        <!-- NEW UNIQUE FEATURE: THE FACE-OFF -->
        <section class="py-20 bg-[#1a1a1a] text-center border-t border-gold/20 relative overflow-hidden">
            <div class="container mx-auto px-4 relative z-10">
                <p class="text-[10px] uppercase tracking-[0.3em] text-gold mb-4">The Grand Face-Off</p>
                <h2 class="text-3xl md:text-5xl font-serif text-ivory mb-12">Whose Side Are You On?</h2>
                
                <div class="flex flex-col md:flex-row justify-center items-center gap-10 md:gap-20">
                    
                    <!-- Team Bride -->
                    <div class="w-full md:w-1/3">
                        <button onclick="voteTeam('bride')" class="group relative w-full bg-maroon-dark border border-gold/30 p-8 rounded-lg hover:border-gold transition-all duration-300 transform hover:scale-105">
                            <div class="absolute inset-0 bg-gold/5 opacity-0 group-hover:opacity-100 transition duration-500"></div>
                            <div class="text-5xl mb-4 transform group-hover:rotate-12 transition duration-300">üë∞‚Äç‚ôÄÔ∏è</div>
                            <h3 class="text-2xl font-serif text-gold mb-2">Ladkiwale</h3>
                            <p class="text-xs text-gray-400 mb-6 font-sans">"We bring the grace & the drama!"</p>
                            
                            <!-- Progress Bar -->
                            <div class="w-full bg-gray-800 h-2 rounded-full overflow-hidden">
                                <div id="bar-bride" class="bg-gradient-to-r from-pink-600 to-rose-400 h-full w-[45%] transition-all duration-1000"></div>
                            </div>
                            <p class="text-right text-[10px] text-gray-500 mt-2 font-mono"><span id="count-bride">482</span> Votes</p>
                        </button>
                    </div>

                    <div class="text-gold font-script text-4xl opacity-50">VS</div>

                    <!-- Team Groom -->
                    <div class="w-full md:w-1/3">
                        <button onclick="voteTeam('groom')" class="group relative w-full bg-maroon-dark border border-gold/30 p-8 rounded-lg hover:border-gold transition-all duration-300 transform hover:scale-105">
                            <div class="absolute inset-0 bg-gold/5 opacity-0 group-hover:opacity-100 transition duration-500"></div>
                            <div class="text-5xl mb-4 transform group-hover:-rotate-12 transition duration-300">üë≥‚Äç‚ôÇÔ∏è</div>
                            <h3 class="text-2xl font-serif text-gold mb-2">Ladkewale</h3>
                            <p class="text-xs text-gray-400 mb-6 font-sans">"We bring the noise & the Bhangra!"</p>
                            
                            <!-- Progress Bar -->
                            <div class="w-full bg-gray-800 h-2 rounded-full overflow-hidden">
                                <div id="bar-groom" class="bg-gradient-to-r from-yellow-500 to-amber-300 h-full w-[52%] transition-all duration-1000"></div>
                            </div>
                            <p class="text-right text-[10px] text-gray-500 mt-2 font-mono"><span id="count-groom">518</span> Votes</p>
                        </button>
                    </div>

                </div>
            </div>
            
            <!-- Floating Emojis Container -->
            <div id="floating-emojis" class="absolute inset-0 pointer-events-none overflow-hidden"></div>
        </section>

        <!-- 9. RSVP & LOGISTICS -->
        <section class="py-16 md:py-24 bg-maroon-dark text-ivory relative overflow-hidden w-full">
            <div class="container mx-auto px-4 md:px-6 grid md:grid-cols-2 gap-12 md:gap-20">
                
                <!-- Info Side -->
                <div class="gs-reveal-left space-y-8 md:space-y-12">
                    <div>
                        <h2 class="text-3xl md:text-4xl font-serif text-gold mb-4 md:mb-6">RSVP & Details</h2>
                        <p class="font-sans text-gray-400 font-light text-sm md:text-base leading-relaxed">
                            We eagerly await your presence. Please confirm your attendance by <span class="text-white font-medium">November 15th</span> so we can make the necessary arrangements for your comfort.
                        </p>
                    </div>

                    <div class="space-y-6">
                        <div class="flex items-start">
                            <div class="w-10 h-10 md:w-12 md:h-12 rounded-full border border-gold/20 flex items-center justify-center mr-4 md:mr-6 text-gold shrink-0">
                                <i class="fas fa-bed"></i>
                            </div>
                            <div>
                                <p class="font-serif text-base md:text-lg text-white mb-1">Accommodation</p>
                                <p class="text-xs md:text-sm text-gray-400 font-light">Rooms blocked at <span class="text-gold">The Taj Skyline</span> for outstation guests.</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-10 h-10 md:w-12 md:h-12 rounded-full border border-gold/20 flex items-center justify-center mr-4 md:mr-6 text-gold shrink-0">
                                <i class="fas fa-car"></i>
                            </div>
                            <div>
                                <p class="font-serif text-base md:text-lg text-white mb-1">Transport</p>
                                <p class="text-xs md:text-sm text-gray-400 font-light">Pick-up arranged from AMD Airport. Contact concierge desk.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Form Side -->
                <div class="bg-white/5 p-6 md:p-10 shadow-2xl border border-white/5 backdrop-blur-sm gs-reveal-right relative overflow-hidden rounded-sm">
                    <div class="absolute top-0 left-0 w-full h-1 bg-gold"></div>
                    
                    <form id="rsvp-form" onsubmit="handleRSVP(event)">
                        <div class="space-y-8">
                            <div class="relative">
                                <input type="text" id="name" required class="peer w-full bg-transparent border-b border-gray-600 py-2 text-ivory focus:outline-none focus:border-gold transition-colors placeholder-transparent text-sm md:text-base">
                                <label for="name" class="absolute left-0 -top-3.5 text-gray-400 text-[10px] md:text-xs transition-all peer-placeholder-shown:text-sm md:peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-placeholder-shown:top-2 peer-focus:-top-3.5 peer-focus:text-gold peer-focus:text-[10px] md:peer-focus:text-xs">Full Name</label>
                            </div>
                            
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
                                <div class="relative">
                                    <input type="number" id="guests" required min="1" class="peer w-full bg-transparent border-b border-gray-600 py-2 text-ivory focus:outline-none focus:border-gold transition-colors placeholder-transparent text-sm md:text-base">
                                    <label for="guests" class="absolute left-0 -top-3.5 text-gray-400 text-[10px] md:text-xs transition-all peer-placeholder-shown:text-sm md:peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-placeholder-shown:top-2 peer-focus:-top-3.5 peer-focus:text-gold peer-focus:text-[10px] md:peer-focus:text-xs">Guests</label>
                                </div>
                                <div class="relative">
                                    <select class="w-full bg-transparent border-b border-gray-600 py-2 text-ivory focus:outline-none focus:border-gold transition-colors appearance-none text-sm md:text-base">
                                        <option value="" class="bg-maroon-dark text-gray-500">Dietary Pref</option>
                                        <option value="veg" class="bg-maroon-dark">Vegetarian</option>
                                        <option value="jain" class="bg-maroon-dark">Jain</option>
                                        <option value="vegan" class="bg-maroon-dark">Vegan</option>
                                    </select>
                                    <i class="fas fa-chevron-down absolute right-0 top-3 text-xs text-gray-500 pointer-events-none"></i>
                                </div>
                            </div>

                            <div class="pt-2">
                                <p class="text-[10px] md:text-xs uppercase tracking-widest text-gray-500 mb-4">I will attend:</p>
                                <div class="flex flex-col sm:flex-row gap-4 sm:gap-6">
                                    <label class="inline-flex items-center cursor-pointer group">
                                        <div class="w-4 h-4 border border-gold/50 flex items-center justify-center transition group-hover:border-gold">
                                            <input type="checkbox" class="appearance-none w-2 h-2 bg-gold opacity-0 checked:opacity-100 transition">
                                        </div>
                                        <span class="ml-3 text-xs md:text-sm text-gray-300 group-hover:text-white transition">Sangeet</span>
                                    </label>
                                    <label class="inline-flex items-center cursor-pointer group">
                                        <div class="w-4 h-4 border border-gold/50 flex items-center justify-center transition group-hover:border-gold">
                                            <input type="checkbox" class="appearance-none w-2 h-2 bg-gold opacity-0 checked:opacity-100 transition">
                                        </div>
                                        <span class="ml-3 text-xs md:text-sm text-gray-300 group-hover:text-white transition">Wedding</span>
                                    </label>
                                </div>
                            </div>

                            <button type="submit" class="w-full bg-gradient-to-r from-gold to-[#b38728] text-maroon-dark font-bold py-3 md:py-4 mt-4 uppercase tracking-[0.2em] text-[10px] md:text-xs hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all transform hover:-translate-y-1">
                                Confirm Attendance
                            </button>
                        </div>
                    </form>
                    
                    <div id="rsvp-success" class="hidden text-center py-12 absolute inset-0 bg-maroon-dark flex flex-col items-center justify-center px-4">
                        <div class="w-12 h-12 md:w-16 md:h-16 rounded-full border-2 border-green-500 flex items-center justify-center text-green-500 text-xl md:text-2xl mb-4 animate-bounce">
                            <i class="fas fa-check"></i>
                        </div>
                        <h3 class="text-xl md:text-2xl font-serif text-white mb-2">Joyfully Confirmed!</h3>
                        <p class="text-gray-400 text-xs md:text-sm">We can't wait to celebrate with you.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 10. SHARE -->
        <section class="py-12 md:py-16 bg-ivory text-center border-t border-maroon/5 overflow-hidden w-full">
            <button onclick="shareViaWhatsapp()" class="group bg-white border border-green-600 text-green-600 px-6 py-2 md:px-8 md:py-3 rounded-full hover:bg-green-600 hover:text-white transition-all duration-300 flex items-center justify-center mx-auto gap-2 md:gap-3 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                <i class="fab fa-whatsapp text-lg md:text-xl"></i> 
                <span class="font-medium tracking-wide text-sm md:text-base">Share Invitation</span>
            </button>
        </section>

        <!-- 11. CLOSING SCENE (Starry Night) -->
        <section class="h-screen bg-[#050505] relative flex items-center justify-center text-center overflow-hidden w-full">
            <!-- Canvas for Stars -->
            <canvas id="star-canvas" class="absolute inset-0 z-0"></canvas>
            
            <div class="relative z-10 px-4 md:px-6 w-full">
            

                <p class="text-gold font-serif text-lg sm:text-xl md:text-3xl mb-6 md:mb-8 opacity-0 closing-text leading-relaxed px-2">"Some beginnings are written in the stars,<br>and last a lifetime."</p>
                
                <p class="text-white/60 font-sans text-[10px] md:text-xs tracking-[0.2em] md:tracking-[0.3em] uppercase mb-10 md:mb-16 opacity-0 closing-text">Thank you for being part of ours</p>
                
                <h1 class="text-5xl sm:text-7xl md:text-[10rem] font-script text-white opacity-0 closing-text gold-shimmer leading-tight md:leading-none">Aarav & Khushi</h1>
                
                <div class="mt-16 md:mt-20 opacity-0 closing-text">
                    <p class="text-gray-700 text-[8px] md:text-[10px] tracking-[0.4em] md:tracking-[0.5em] uppercase">EXPERIENCE DESIGNED BY NYOTA</p>
                </div>
            </div>
        </section>

    </div>

    <script>
        // --- 1. ENHANCED OPENING RITUAL SCRIPT ---
        const tl = gsap.timeline({ paused: true });
        
        // Initial setup
        gsap.set("#intro-symbol, .intro-text, #intro-couple, #enter-btn-wrapper", { opacity: 0 });
        gsap.set("#diya-container", { opacity: 0, scale: 0.8, y: 20 });
        gsap.set(".intro-text", { y: 20 });

        function startIntro() {
            // 1. Symbol & Diya
            tl.to("#intro-symbol", { opacity: 1, duration: 1.5, ease: "power2.out" })
              .to("#diya-container", { opacity: 1, scale: 1, y: 0, duration: 2, ease: "power2.out" }, "-=1")
              
            // 2. Text Sequence (Fade In/Out Loop)
            const textElements = document.querySelectorAll('.intro-text');
            textElements.forEach((el, index) => {
                tl.to(el, { opacity: 1, y: 0, duration: 1.5, ease: "power2.out" })
                  .to(el, { opacity: 0, y: -20, duration: 1, ease: "power2.in" }, "+=0.5");
            });

            // 3. Final Reveal
            tl.to("#intro-couple", { opacity: 1, scale: 1, duration: 2.5, ease: "slow(0.7, 0.7, false)" })
              .to("#enter-btn-wrapper", { opacity: 1, y: 0, duration: 1.5 }, "-=1.5");
            
            tl.play();
        }

        window.addEventListener('load', () => {
            startIntro();
            checkPersonalization();
        });

        // --- NEW: PERSONALIZATION LOGIC ---
        function checkPersonalization() {
            const urlParams = new URLSearchParams(window.location.search);
            const guestName = urlParams.get('guest');
            if(guestName) {
                // Update Hero Welcome
                const welcomeMsg = document.getElementById('welcome-msg');
                if(welcomeMsg) {
                    welcomeMsg.innerHTML = `Special Invite for <span class="text-gold font-bold border-b border-gold/50">${guestName}</span>`;
                    welcomeMsg.classList.add('text-white');
                }
            }
        }

        // --- NEW: FACE-OFF VOTING LOGIC ---
        let votesBride = 482;
        let votesGroom = 518;

        function voteTeam(team) {
            const container = document.getElementById('floating-emojis');
            const emoji = team === 'bride' ? 'üíÉ' : 'üï∫';
            
            // Update Numbers
            if(team === 'bride') {
                votesBride++;
                document.getElementById('count-bride').innerText = votesBride;
                document.getElementById('bar-bride').style.width = Math.min(100, (votesBride / (votesBride + votesGroom)) * 100 * 1.5) + "%"; // Fake multiplier for visual effect
            } else {
                votesGroom++;
                document.getElementById('count-groom').innerText = votesGroom;
                document.getElementById('bar-groom').style.width = Math.min(100, (votesGroom / (votesBride + votesGroom)) * 100 * 1.5) + "%";
            }

            // Spawn Floating Emoji
            const el = document.createElement('div');
            el.innerText = emoji;
            el.style.position = 'absolute';
            el.style.left = Math.random() * 80 + 10 + "%";
            el.style.bottom = "0px";
            el.style.fontSize = Math.random() * 20 + 20 + "px";
            el.style.opacity = 1;
            el.style.transition = "all 2s ease-out";
            el.style.zIndex = 50; // Ensure visible
            
            container.appendChild(el);

            // Animate up
            setTimeout(() => {
                el.style.bottom = "300px";
                el.style.opacity = 0;
            }, 50);

            // Cleanup
            setTimeout(() => {
                el.remove();
            }, 2000);
        }

        // --- NEW: SEND SONG LOGIC ---
        function sendSong() {
            const input = document.getElementById('song-request');
            const note = document.getElementById('music-note');
            
            if(input.value.trim() !== "") {
                gsap.to(note, { opacity: 1, y: -50, x: 20, rotation: 360, duration: 1.5, ease: "power1.out", onComplete: () => {
                    gsap.set(note, { opacity: 0, y: 0, x: 0, rotation: 0 });
                }});
                input.value = "Request Sent!";
                setTimeout(() => input.value = "", 2000);
            }
        }

        // --- ENTER BUTTON & AUDIO ---
        document.getElementById('enter-btn').addEventListener('click', () => {
            const audio = document.getElementById('wedding-audio');
            const overlay = document.getElementById('intro-overlay');
            const mainContent = document.getElementById('main-content');
            const muteBtn = document.getElementById('mute-btn');
            const showerBtn = document.getElementById('shower-btn');

            // Play Audio with Fade In
            audio.volume = 0;
            audio.play().then(() => {
                gsap.to(audio, { volume: 0.5, duration: 3 });
            }).catch(e => console.log("Audio play failed", e));
            
            // Transition
            gsap.to(overlay, { 
                opacity: 0, 
                duration: 2, 
                ease: "power2.inOut",
                onComplete: () => { 
                    overlay.style.display = 'none'; 
                    muteBtn.classList.remove('hidden');
                    showerBtn.classList.remove('hidden');
                } 
            });
            
            gsap.to(mainContent, { opacity: 1, duration: 2.5, delay: 0.5 });
            
            initScrollAnimations();
            initPetals(); // Start petals only after entry
        });

        // Audio Mute Toggle
        const muteBtn = document.getElementById('mute-btn');
        let isMuted = false;
        
        muteBtn.addEventListener('click', () => {
            const audio = document.getElementById('wedding-audio');
            const icon = muteBtn.querySelector('i');
            
            if(isMuted) {
                gsap.to(audio, { volume: 0.5, duration: 1 });
                icon.className = 'fas fa-volume-up';
                muteBtn.classList.add('audio-pulse');
            } else {
                gsap.to(audio, { volume: 0, duration: 1 });
                icon.className = 'fas fa-volume-mute';
                muteBtn.classList.remove('audio-pulse');
            }
            isMuted = !isMuted;
        });

        // --- 2. SCROLL ANIMATIONS ---
        function initScrollAnimations() {
            gsap.registerPlugin(ScrollTrigger);

            gsap.utils.toArray('.gs-reveal').forEach(elem => {
                gsap.fromTo(elem, 
                    { opacity: 0, y: 60 },
                    {
                        scrollTrigger: { trigger: elem, start: "top 85%" },
                        opacity: 1, y: 0, duration: 1.5, ease: "power3.out"
                    }
                );
            });

            gsap.utils.toArray('.gs-reveal-left').forEach(elem => {
                gsap.fromTo(elem, 
                    { opacity: 0, x: -60 },
                    {
                        scrollTrigger: { trigger: elem, start: "top 85%" },
                        opacity: 1, x: 0, duration: 1.5, ease: "power3.out"
                    }
                );
            });

            gsap.utils.toArray('.gs-reveal-right').forEach(elem => {
                gsap.fromTo(elem, 
                    { opacity: 0, x: 60 },
                    {
                        scrollTrigger: { trigger: elem, start: "top 85%" },
                        opacity: 1, x: 0, duration: 1.5, ease: "power3.out"
                    }
                );
            });

            // Staggered Closing
            gsap.fromTo(".closing-text", 
                { opacity: 0, y: 40, filter: "blur(10px)" },
                {
                    scrollTrigger: { trigger: "#star-canvas", start: "top 60%" },
                    opacity: 1, y: 0, filter: "blur(0px)",
                    stagger: 0.8, duration: 2.5, ease: "power2.out"
                }
            );
        }

        // --- 3. COUNTDOWN ---
        const weddingDate = new Date("Dec 12, 2026 18:30:00").getTime();
        
        function updateCountdown() {
            const now = new Date().getTime();
            const distance = weddingDate - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            
            const boxClass = "flex flex-col items-center bg-white/50 border border-maroon/5 p-4 w-24 md:w-32 rounded-sm shadow-sm";
            const numClass = "text-3xl md:text-5xl font-serif text-maroon";
            const labelClass = "text-[10px] uppercase tracking-widest text-gray-500 mt-2";

            document.getElementById("countdown").innerHTML = `
                <div class="${boxClass}"><span class="${numClass}">${days}</span><span class="${labelClass}">Days</span></div>
                <div class="${boxClass}"><span class="${numClass}">${hours}</span><span class="${labelClass}">Hours</span></div>
            `;
        }
        setInterval(updateCountdown, 1000);
        updateCountdown();

        // --- 4. 3D TILT EFFECT FOR CARDS ---
        function tiltCard(event, card) {
            const rect = card.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            
            const rotateX = ((y - centerY) / centerY) * -5; // Max 5 deg rotation
            const rotateY = ((x - centerX) / centerX) * 5;

            card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.02)`;
        }

        function resetCard(card) {
            card.style.transform = `perspective(1000px) rotateX(0) rotateY(0) scale(1)`;
        }

        // --- 5. FALLING PETALS ANIMATION & BURST ---
        let petals = [];
        let canvas, ctx;

        function initPetals() {
            canvas = document.getElementById('petals-canvas');
            if(!canvas) return;
            ctx = canvas.getContext('2d');
            
            canvas.width = canvas.parentElement.offsetWidth;
            canvas.height = canvas.parentElement.offsetHeight;

            const petalCount = 40;

            for(let i=0; i<petalCount; i++) petals.push(new Petal(false));

            function animatePetals() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                petals.forEach(petal => {
                    petal.update();
                    petal.draw();
                });
                requestAnimationFrame(animatePetals);
            }
            animatePetals();
        }

        // Exposed global function for button click
        window.triggerPetalBurst = function() {
            // Spawn 100 new petals
            for(let i=0; i<100; i++) {
                petals.push(new Petal(true));
            }
            // Visual feedback on button
            const btn = document.getElementById('shower-btn');
            btn.classList.add('scale-90');
            setTimeout(() => btn.classList.remove('scale-90'), 150);
        }

        class Petal {
            constructor(isBurst) {
                this.isBurst = isBurst;
                this.reset(true);
            }
            reset(firstTime) {
                // If burst petal finishes, remove it or recycle it? Let's remove bursts to save performance
                if(this.isBurst && !firstTime) {
                    this.dead = true;
                    return;
                }

                if (this.isBurst) {
                    this.x = Math.random() * canvas.width;
                    this.y = -20; // Start just above
                    this.speedY = Math.random() * 5 + 5; // Much faster
                    this.speedX = Math.random() * 4 - 2;
                } else {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * -canvas.height;
                    this.speedY = Math.random() * 1 + 0.5;
                    this.speedX = Math.random() * 1 - 0.5;
                }
                
                this.size = Math.random() * 5 + 2;
                this.rotation = Math.random() * 360;
                this.rotationSpeed = Math.random() * 2 - 1;
                this.color = `rgba(${200 + Math.random()*55}, ${50 + Math.random()*50}, ${50 + Math.random()*50}, ${Math.random() * 0.5 + 0.4})`;
            }
            update() {
                if(this.dead) return;

                this.y += this.speedY;
                this.x += Math.sin(this.y * 0.01) + this.speedX;
                this.rotation += this.rotationSpeed;

                if (this.y > canvas.height) {
                    // Recycle only if not a one-time burst
                    if(this.isBurst) {
                         // Optional: could allow them to loop once or twice, but let's keep it clean
                         this.dead = true; 
                    } else {
                        this.reset(false);
                    }
                }
            }
            draw() {
                if(this.dead) return;
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation * Math.PI / 180);
                ctx.fillStyle = this.color;
                ctx.beginPath();
                // Draw simple petal shape (ellipse-ish)
                ctx.ellipse(0, 0, this.size, this.size / 2, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }

        // --- 6. STAR CANVAS (Closing) ---
        // Changed innerWidth to clientWidth to prevent vertical scrollbar pushing layout
        const starCanvas = document.getElementById('star-canvas');
        const sCtx = starCanvas.getContext('2d');
        starCanvas.width = document.body.clientWidth;
        starCanvas.height = window.innerHeight;

        const stars = Array(200).fill().map(() => ({
            x: Math.random() * starCanvas.width,
            y: Math.random() * starCanvas.height,
            size: Math.random() * 1.5,
            alpha: Math.random(),
            speed: Math.random() * 0.02
        }));

        function drawStars() {
            sCtx.fillStyle = '#050505';
            sCtx.fillRect(0, 0, starCanvas.width, starCanvas.height);
            
            stars.forEach(star => {
                sCtx.fillStyle = `rgba(255, 255, 255, ${star.alpha})`;
                sCtx.beginPath();
                sCtx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                sCtx.fill();
                star.alpha += star.speed * (Math.random() > 0.5 ? 1 : -1);
                if(star.alpha < 0) star.alpha = 0; 
                if(star.alpha > 1) star.alpha = 1;
            });
            requestAnimationFrame(drawStars);
        }
        drawStars();

        // --- 7. RSVP HANDLER ---
        function handleRSVP(e) {
            e.preventDefault();
            const form = document.getElementById('rsvp-form');
            const success = document.getElementById('rsvp-success');
            
            gsap.to(form, { opacity: 0, y: -20, duration: 0.5, onComplete: () => {
                form.style.display = 'none';
                success.classList.remove('hidden');
                gsap.fromTo(success, { opacity: 0, scale: 0.8 }, { opacity: 1, scale: 1, duration: 0.5 });
            }});
        }
        
        function shareViaWhatsapp() {
            const text = encodeURIComponent("You are invited to the wedding of Aarav & Khushi. View the experience: [Link]");
            window.open(`https://wa.me/?text=${text}`, '_blank');
        }

        window.addEventListener('resize', () => {
            starCanvas.width = document.body.clientWidth;
            starCanvas.height = window.innerHeight;
            if(canvas) {
                canvas.width = canvas.parentElement.offsetWidth;
                canvas.height = canvas.parentElement.offsetHeight;
            }
        });

    </script>
</body>
</html>